import { useState } from "react";

interface LoginScreenProps {
  onLogin: (userName: string) => void;
  isLoading: boolean;
  error: string | null;
}

// A logó SVG komponensként kiszervezve a tisztább kód érdekében
function AppLogo() {
  return (
    <svg width="120" height="100" viewBox="0 0 396 335" fill="none" xmlns="http://www.w3.org/2000/svg" style={{ display: "block", margin: "0 auto" }}>
      <g filter="url(#filter0_d_482_10)">
        <path d="M134.375 60.0586H133.984L132.812 54.9805C130.859 44.9219 128.418 36.7188 125.488 30.3711C122.559 24.0234 118.555 19.1406 113.477 15.8203C108.398 12.5 101.758 10.8398 93.6523 10.8398H91.7969C85.5469 10.8398 79.6875 11.2305 74.0234 11.8164V73.5352H84.5703C94.5312 73.5352 101.562 71.1914 105.859 66.3086C110.059 61.4258 112.695 54.6875 113.672 45.9961L114.16 42.5781H114.746V105.176H114.16L113.672 101.953C112.891 96.2891 111.621 91.5039 109.766 87.4023C107.91 83.3984 104.98 80.1758 100.879 77.7344C96.7773 75.3906 91.4062 74.1211 84.5703 74.1211H74.0234V134.375C74.0234 137.598 74.4141 140.137 75.1953 141.992C75.9766 143.945 77.4414 145.41 79.5898 146.387C81.7383 147.363 84.7656 148.047 88.6719 148.242L94.2383 148.633V149.023H26.4648V148.633L30.1758 148.242C33.6914 147.852 36.3281 147.168 38.1836 146.191C39.9414 145.215 41.2109 143.848 41.8945 141.992C42.4805 140.234 42.8711 137.695 42.8711 134.375V24.9023C42.8711 21.7773 42.5781 19.2383 41.9922 17.4805C41.4062 15.7227 40.1367 14.3555 38.3789 13.2812C36.5234 12.207 33.7891 11.4258 30.1758 11.0352L26.4648 10.6445V10.2539H134.375V60.0586Z" fill="#A581FF"/>
        <path d="M194.824 148.633V149.023H139.746V148.633L142.188 148.438C145.996 148.145 148.633 147.168 150.195 145.41C151.66 143.652 152.441 141.016 152.441 137.305V13.4766C152.441 10.6445 152.148 8.39844 151.562 6.64062C150.977 4.98047 149.707 3.61328 147.949 2.63672C146.191 1.66016 143.555 0.976562 140.039 0.683594L137.012 0.390625V0H182.422H182.812C182.422 6.44531 182.227 15.2344 182.227 26.5625V137.305C182.227 141.016 182.91 143.652 184.473 145.41C185.938 147.168 188.574 148.145 192.48 148.438L194.824 148.633ZM217.09 33.8867C214.551 32.5195 212.5 30.5664 211.035 28.0273C209.57 25.4883 208.887 22.7539 208.887 19.8242C208.887 16.9922 209.57 14.3555 211.035 11.8164C212.5 9.375 214.551 7.42188 217.09 5.95703C219.629 4.58984 222.363 3.80859 225.488 3.80859C228.516 3.80859 231.348 4.58984 233.887 5.95703C236.426 7.42188 238.477 9.375 240.039 11.8164C241.504 14.3555 242.285 16.9922 242.285 19.8242C242.285 22.7539 241.504 25.3906 240.039 27.9297C238.574 30.4688 236.523 32.4219 233.984 33.8867C231.445 35.3516 228.613 36.0352 225.488 36.0352C222.363 36.0352 219.629 35.3516 217.09 33.8867ZM253.223 148.633V149.023H198.145V148.633L200.488 148.438C204.297 148.145 206.934 147.168 208.496 145.41C210.059 143.652 210.84 141.016 210.84 137.305V68.8477C210.84 65.918 210.547 63.4766 210.156 61.7188C209.668 59.9609 208.691 58.4961 207.324 57.4219C205.859 56.3477 203.711 55.6641 200.781 55.4688L198.242 55.2734V54.8828H240.82H241.309C240.723 61.4258 240.527 70.6055 240.527 82.3242V137.305C240.527 141.016 241.211 143.652 242.773 145.41C244.238 147.168 246.875 148.145 250.781 148.438L253.223 148.633ZM361.621 148.633V149.023H307.91V148.633L309.375 148.438C314.844 147.754 317.578 145.801 317.578 142.48C317.578 141.309 317.188 139.941 316.504 138.281C315.723 136.621 314.355 134.18 312.402 130.957L296.289 105.859L290.82 114.258C287.891 118.75 285.742 122.559 284.473 125.781C283.105 129.102 282.52 132.031 282.52 134.57C282.52 137.988 283.691 141.016 286.23 143.652C288.77 146.289 292.578 147.852 297.656 148.438L299.609 148.633V149.023H254.492V148.633L255.469 148.438C265.137 146.191 276.66 134.766 290.039 114.258L295.996 105.371L271.973 67.9688C269.238 63.8672 266.895 60.8398 264.746 59.082C262.598 57.3242 260.352 56.0547 257.91 55.4688L257.031 55.2734V54.8828H309.18V55.2734L307.52 55.4688C304.785 55.8594 303.027 56.4453 302.051 57.2266C301.074 58.0078 300.684 59.1797 300.684 60.5469C300.684 61.7188 301.074 63.1836 302.051 65.0391C302.93 66.9922 304.492 69.6289 306.738 72.9492L320.508 94.2383L326.074 85.5469C329.98 79.2969 332.031 73.3398 332.031 67.7734C332.031 64.8438 330.859 62.1094 328.613 59.7656C326.367 57.4219 323.047 56.0547 318.75 55.4688L317.09 55.2734V54.8828H360.742V55.2734L359.57 55.4688C354.883 56.3477 349.902 58.9844 344.629 63.3789C339.355 67.7734 333.496 75.1953 326.855 85.5469L320.801 94.8242L347.168 135.645C349.707 139.551 352.051 142.578 354.395 144.629C356.641 146.68 358.887 147.949 361.133 148.438L361.621 148.633ZM232.227 276.855V294.336C232.227 302.344 231.445 308.594 230.078 313.281C228.711 317.969 226.465 321.289 223.535 323.34C220.605 325.391 216.602 326.367 211.621 326.367C205.176 326.367 200 324.316 196.289 320.215C192.578 316.113 190.43 310.352 190.039 302.734H189.844C187.5 309.375 183.594 315.039 177.93 319.727C172.266 324.414 165.039 326.66 156.348 326.66C149.316 326.66 143.848 325.098 139.941 321.777C136.035 318.457 134.082 313.965 134.082 308.301C134.082 304.199 135.156 300.488 137.305 297.168C139.453 293.945 142.871 290.82 147.656 287.891C152.344 284.961 158.887 281.738 167.188 278.32L190.234 268.75C190.234 266.406 190.332 262.793 190.332 257.715C190.332 247.363 188.477 240.039 184.766 235.645C181.055 231.348 175.586 229.102 168.359 229.102C164.258 229.102 160.449 229.98 156.934 231.738C153.32 233.496 150.391 235.938 148.145 238.867C145.898 241.797 144.727 245.02 144.531 248.438C145.508 246.484 146.973 244.824 148.926 243.652C150.879 242.48 153.125 241.895 155.859 241.895C159.668 241.895 162.891 243.066 165.527 245.41C168.066 247.754 169.434 251.074 169.434 255.273C169.434 259.668 168.066 263.086 165.332 265.527C162.598 268.066 159.375 269.238 155.566 269.238C152.832 269.238 150.293 268.652 148.145 267.383C145.898 266.113 144.141 264.258 142.871 261.914C141.602 259.57 141.016 256.836 141.016 253.711C141.016 249.316 142.285 245.117 144.922 241.016C147.461 237.012 151.367 233.691 156.641 231.152C161.914 228.613 168.262 227.246 175.879 227.246C185.645 227.246 193.848 229.199 200.391 232.91C206.934 236.719 211.719 241.797 214.844 248.242C217.969 254.688 219.531 261.816 219.531 269.824L219.336 287.402C219.043 299.316 218.945 308.398 218.945 314.746C218.945 318.652 220.215 320.508 222.949 320.508C224.316 320.508 225.586 319.727 226.855 318.164C228.125 316.602 229.199 313.867 230.176 309.961C231.055 306.055 231.543 300.879 231.543 294.336V276.855H232.227ZM182.422 313.77C185.449 310.254 187.891 305.859 189.844 300.781L189.941 289.062L190.234 269.336L180.469 273.73C173.633 276.855 168.652 280.469 165.527 284.57C162.402 288.77 160.84 294.141 160.84 300.781C160.84 307.227 161.816 311.914 163.965 314.746C166.113 317.676 168.848 319.043 172.168 319.043C175.879 319.043 179.297 317.285 182.422 313.77ZM317.578 232.91C320.41 235.84 321.875 239.355 321.875 243.652C321.875 248.535 320.41 252.441 317.48 255.273C314.551 258.203 310.742 259.57 306.25 259.57C303.516 259.57 301.074 258.984 298.73 257.812C296.387 256.641 294.629 254.883 293.262 252.734C291.895 250.586 291.211 248.047 291.211 245.117C291.211 240.527 292.676 236.816 295.605 233.984C291.211 235.742 287.598 239.941 284.863 246.387C282.031 252.832 280.078 260.156 279.102 268.359V312.5C279.102 316.406 279.883 319.141 281.641 320.703C283.301 322.266 286.426 323.242 290.918 323.438L297.07 323.633V324.023H236.719V323.633L239.062 323.438C242.871 323.145 245.508 322.168 247.07 320.41C248.633 318.652 249.414 316.016 249.414 312.305V243.848C249.414 240.82 249.121 238.379 248.633 236.523C248.145 234.766 247.168 233.301 245.703 232.324C244.238 231.348 242.09 230.664 239.355 230.469L236.816 230.273V229.883H279.395C278.809 245.41 278.516 257.812 278.516 266.992H278.711C279.492 261.914 280.762 256.641 282.324 251.27C283.887 245.996 286.621 240.82 290.527 235.938C294.434 231.055 299.512 228.516 305.957 228.516C310.84 228.516 314.746 229.98 317.578 232.91ZM366.309 230.469V310.547C366.309 313.965 366.797 316.406 367.871 317.773C368.945 319.238 370.605 319.922 372.852 319.922C374.902 319.922 376.855 318.945 378.613 316.992C380.371 315.039 381.738 311.914 382.812 307.617C383.887 303.32 384.473 297.949 384.473 291.309V267.09H385.059V291.602C385.059 303.516 383.203 312.207 379.492 317.773C375.781 323.438 369.531 326.172 360.938 326.172C352.832 326.172 346.777 323.34 342.676 317.578C338.574 311.914 336.621 304.395 336.621 295.117V230.469H321.68V229.883H325.684C332.129 229.883 338.281 228.809 343.945 226.66C349.609 224.512 354.395 221.094 358.301 216.309C362.207 211.523 364.551 205.371 365.527 197.852L365.723 195.898H366.309V229.883H387.109V230.469H366.309Z" fill="#F2F2F2"/>
        <path d="M136.426 185.254V185.645L133.887 185.84C128.027 186.621 123.633 190.527 120.703 197.559C117.773 204.59 116.406 215.039 116.406 229.004V270.312C116.406 289.16 112.598 303.223 105.078 312.598C97.4609 321.973 85.6445 326.66 69.6289 326.66C57.3242 326.66 47.2656 324.805 39.4531 321.094C31.6406 317.383 25.7812 311.523 22.0703 303.711C18.2617 295.898 16.4062 285.742 16.4062 273.242V199.902C16.4062 196.68 16.0156 194.141 15.4297 192.285C14.7461 190.527 13.4766 189.062 11.7188 188.086C9.86328 187.109 7.22656 186.426 3.71094 186.035L0 185.645V185.254H63.9648V185.645L60.2539 186.035C56.7383 186.426 54.0039 187.109 52.2461 188.086C50.3906 189.062 49.1211 190.527 48.5352 192.285C47.8516 194.141 47.5586 196.68 47.5586 199.902V275.781C47.5586 286.719 48.7305 295.41 51.0742 302.051C53.418 308.691 56.9336 313.477 61.7188 316.406C66.4062 319.434 72.6562 320.898 80.2734 320.898C91.6992 320.898 100.488 316.895 106.641 308.789C112.695 300.684 115.82 287.793 115.82 270.215V229.004C115.82 218.652 114.453 210.352 111.914 204.102C109.375 197.852 105.762 193.359 101.27 190.625C96.7773 187.891 91.3086 186.328 84.8633 185.84L81.0547 185.645V185.254H136.426Z" fill="#A1DD29"/>
      </g>
      <defs>
        <filter id="filter0_d_482_10" x="0" y="0" width="395.109" height="334.66" filterUnits="userSpaceOnUse" colorInterpolationFilters="sRGB">
          <feFlood floodOpacity="0" result="BackgroundImageFix"/>
          <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
          <feOffset dx="4" dy="4"/>
          <feGaussianBlur stdDeviation="2"/>
          <feComposite in2="hardAlpha" operator="out"/>
          <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0"/>
          <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_482_10"/>
          <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_482_10" result="shape"/>
        </filter>
      </defs>
    </svg>
  );
}

export function LoginScreen({ onLogin, isLoading, error }: LoginScreenProps) {
  const [userName, setUserName] = useState("");

  const handleSubmit = () => {
    if (userName.trim()) onLogin(userName);
  };

  return (
    <div style={{ 
      minHeight: "100vh", 
      width: "100vw",
      background: "linear-gradient(135deg, #1a1a2e 0%, #000000 50%, #0f1c0f 100%)",
      display: "flex", 
      alignItems: "center", 
      justifyContent: "center", 
      fontFamily: "'Inter', system-ui, sans-serif" 
    }}>
      
      {/* Középső Kártya */}
      <div style={{ 
        backgroundColor: "#111", // Kicsit sötétebb, mint a design képen, de illeszkedik a dark theme-hez
        padding: "40px 32px", 
        borderRadius: "24px", 
        width: "100%", 
        maxWidth: "400px", 
        border: "1px solid #222",
        boxShadow: "0 25px 50px -12px rgba(0, 0, 0, 0.5)",
        display: "flex",
        flexDirection: "column",
        alignItems: "center"
      }}>
        
        {/* SVG Logo */}
        <div style={{ marginBottom: "20px" }}>
          <AppLogo />
        </div>

        <h1 style={{ fontSize: "28px", fontWeight: 800, margin: "0 0 8px 0", color: "#f5f5f5" }}>
          RealTimeChat
        </h1>
        <p style={{ color: "#777", marginBottom: "32px", textAlign: "center", fontSize: "14px", lineHeight: "1.5" }}>
          Üdvözlünk! Kérlek, válassz egy felhasználónevet a csevegés megkezdéséhez.
        </p>

        {/* Input Container */}
        <div style={{ width: "100%", marginBottom: "16px" }}>
          <label style={{ display: "block", fontSize: "11px", color: "#888", marginBottom: "8px", fontWeight: 700, paddingLeft: "4px", textTransform: "uppercase" }}>
            FELHASZNÁLÓNÉV
          </label>
          <input
            type="text"
            value={userName}
            onChange={(e) => setUserName(e.target.value)}
            onKeyDown={(e) => e.key === "Enter" && handleSubmit()}
            placeholder="pl. roland"
            style={{ 
              width: "100%", 
              boxSizing: "border-box", // Fontos, hogy ne csússzon szét a padding miatt
              padding: "14px 16px", 
              borderRadius: "12px", 
              border: "1px solid #333", 
              backgroundColor: "#222", 
              color: "#fff", 
              fontSize: "15px",
              outline: "none",
              transition: "border-color 0.2s"
            }}
          />
        </div>

        {error && (
          <div style={{ 
            width: "100%",
            boxSizing: "border-box",
            backgroundColor: "rgba(255, 107, 107, 0.1)", 
            color: "#ff6b6b", 
            fontSize: "13px", 
            padding: "10px", 
            borderRadius: "8px",
            marginBottom: "16px",
            textAlign: "center"
          }}>
            {error}
          </div>
        )}

        <button
          onClick={handleSubmit}
          disabled={isLoading}
          style={{ 
            width: "100%", 
            padding: "14px", 
            marginTop: "12px",
            borderRadius: "999px", 
            border: "none", 
            backgroundColor: "#A1DD29", // A logóból vett pontos zöld szín
            color: "#111", 
            cursor: isLoading ? "not-allowed" : "pointer", 
            fontWeight: 800, 
            fontSize: "15px",
            opacity: isLoading ? 0.7 : 1,
            transition: "transform 0.1s"
          }}
        >
          {isLoading ? "Csatlakozás..." : "Belépés"}
        </button>
      </div>
    </div>
  );
}